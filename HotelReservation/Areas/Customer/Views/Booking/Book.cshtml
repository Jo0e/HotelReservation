@model Models.ViewModels.ReservationViewModel

<h2>Book a Room</h2>
<form asp-action="Book" method="post">
    <input type="hidden" asp-for="HotelId" />

    <div class="form-group mt-2">
        <label for="RoomTypeId">Room Type</label>
        <select id="roomType" asp-for="RoomTypeId" asp-items="ViewBag.RoomTypes" class="form-control"></select>
        <span asp-validation-for="RoomTypeId" class="text-danger"></span>
    </div>
   
    <div class="form-group mt-2">
        <label asp-for="RoomCount">Number of Rooms</label>
        <input id="roomCount" asp-for="RoomCount" class="form-control" type="number" value="1" />
        <span asp-validation-for="RoomCount" class="text-danger"></span>
    </div>
    
    <div class="form-group mt-2">
        <label asp-for="NAdult">Number of Adults</label>
        <input asp-for="NAdult" class="form-control" type="number" value="1" />
        <span asp-validation-for="NAdult" class="text-danger"></span>
    </div>

    <div class="form-group mt-2">
        <label asp-for="NChildren">Number of Children</label>
        <input asp-for="NChildren" class="form-control" type="number" value="0" />
        <span asp-validation-for="NChildren" class="text-danger"></span>
    </div>
    <div class="form-group mt-2">
        <label asp-for="CheckInDate"></label>
        <input asp-for="CheckInDate" class="form-control" />
        <span asp-validation-for="CheckInDate" class="text-danger"></span>
    </div>
    <div class="form-group mt-2">
        <label asp-for="CheckOutDate"></label>
        <input asp-for="CheckOutDate" class="form-control" />
        <span asp-validation-for="CheckOutDate" class="text-danger"></span>
    </div>
   
    <div class="form-group mt-2">
        <input id="includeMeal" type="checkbox" name="includeMeal" />
        <label for="includeMeal">Do you want meals? (Extra $20 per room)</label>
    </div>

    <div class="form-group mt-2">
        <label asp-for="CouponCode">Coupon Code</label>
        <input asp-for="CouponCode" class="form-control" placeholder="Enter coupon code (optional)" />
        <span asp-validation-for="CouponCode" class="text-danger"></span>
    </div>

    <h4>Total Price: <span id="totalPrice">0</span> EGP</h4>

    <a href="/Customer/Booking/Pay" class="btn btn-primary border-0 ">Book</a>

</form>

<script>
    const roomTypeDropdown = document.getElementById('roomType');
    const roomCountInput = document.getElementById('roomCount');
    const includeMealCheckbox = document.getElementById('includeMeal');
    const totalPriceSpan = document.getElementById('totalPrice');

    function calculateTotalPrice() {
        const selectedOption = roomTypeDropdown.options[roomTypeDropdown.selectedIndex];
        const roomPrice = parseFloat(selectedOption.text.split('-')[1].trim().replace('EGP', '')) || 0;
        const roomCount = parseInt(roomCountInput.value) || 1;
        const mealPrice = includeMealCheckbox.checked ? 20 : 0;

        const totalPrice = (roomPrice + mealPrice) * roomCount;
        totalPriceSpan.textContent = totalPrice.toFixed(2);
    }

    roomTypeDropdown.addEventListener('change', calculateTotalPrice);
    roomCountInput.addEventListener('input', calculateTotalPrice);
    includeMealCheckbox.addEventListener('change', calculateTotalPrice);

    calculateTotalPrice(); // Initial calculation
</script>

 